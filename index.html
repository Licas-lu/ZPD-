<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZPD ç–¯ç‹‚åŠ¨ç‰©åŸï¼šæ²ˆé˜³ç¾é£ŸæœæŸ¥ä»¤</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React ç›¸å…³åº“ -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥å›¾æ ‡åº“ -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a192f;
            margin: 0;
            overflow-x: hidden;
        }

        .zootopia-bg {
            /* âœ… æ”¹åŠ¨ 1ï¼šç§»é™¤äº†è¿™é‡Œç¡¬ç¼–ç çš„ background-imageã€‚
               æ”¹ä¸ºåªä¿ç•™èƒŒæ™¯çš„å¸ƒå±€æ ·å¼ï¼Œå…·ä½“çš„å›¾ç‰‡è·¯å¾„äº¤ç”± React åŠ¨æ€æ¸²æŸ“ã€‚
               å¦‚æœä½ è§‰å¾—èƒŒæ™¯å¤ªæ¨¡ç³Šæˆ–è€…å¤ªæš—ï¼Œå¯ä»¥è°ƒæ•´è¿™é‡Œçš„ filter å’Œ opacity å±æ€§ */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* åŠ ä¸Šè¿™è¡Œå¯ä»¥è®©èƒŒæ™¯å›¾åœ¨æ»šåŠ¨æ—¶ä¿æŒé™æ­¢ */
            position: fixed; 
            inset: 0; 
            opacity: 0.35; 
            filter: blur(4px); 
            z-index: -1;
        }

        .zpd-glass {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .police-btn {
            background: linear-gradient(180deg, #1e40af 0%, #1e3a8a 100%);
            border-bottom: 4px solid #172554;
            transition: all 0.2s;
        }

        .police-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(30, 64, 175, 0.5);
        }

        .district-card {
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .district-card:hover {
            transform: translateY(-8px) scale(1.03);
            background: rgba(30, 64, 175, 0.4);
            border-color: rgba(234, 179, 8, 0.5);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
        }

        @keyframes fly-into-box {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            100% { transform: scale(0) rotate(720deg) translate(0, 500px); opacity: 0; }
        }

        .archive-anim { animation: fly-into-box 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards; }

        @keyframes box-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
            50% { box-shadow: 0 0 50px rgba(59, 130, 246, 0.7); }
        }

        .box-ready { animation: box-glow 2s infinite; }

        @keyframes slow-blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .slow-motion { animation: slow-blink 3s infinite; }

        .fade-in { animation: fadeIn 0.7s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* å›¾ç‰‡å¤±è´¥å ä½ç¬¦æ ·å¼ */
        .img-fallback {
            background: #1e293b;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #475569;
            font-size: 0.75rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const ASSETS = {
            nick: encodeURIComponent('nike.jpg'),
            judy: encodeURIComponent('judy.jpg'),
            judy2: encodeURIComponent('judy2.jpg'),
            flash: encodeURIComponent('flash.jpg'),
            // âœ… æ”¹åŠ¨ 2ï¼šå°†åŸæœ¬çš„ background1.mp4 æ›¿æ¢ä¸ºä½ çš„èƒŒæ™¯å›¾ç‰‡åç§°ã€‚
            // ç¡®ä¿ä½ æœ‰ä¸€ä¸ªåä¸º background.jpg çš„å›¾ç‰‡å’Œè¿™ä¸ª HTML æ–‡ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚
            background: encodeURIComponent('background.jpg') 
        };

        const zootopiaDistricts = {
            "å’Œå¹³åŒº": { name: "ä¸­å¿ƒåŸåŒº", desc: "å¤§éƒ½ä¼šè¡Œæ”¿ä¸­å¿ƒ", full: "å……æ»¡ç¹å¿™æ°”æ¯çš„è¡Œæ”¿ä¸­æ¢ã€‚" },
            "æ²ˆæ²³åŒº": { name: "æ’’å“ˆæ‹‰å¹¿åœº", desc: "é«˜çº§æ²™æ¼ ç”Ÿæ´»åŒº", full: "çƒ­æµªè¢­äººçš„å¼‚åŸŸé£æƒ…ä¹‹åœ°ã€‚" },
            "å¤§ä¸œåŒº": { name: "è‹”åŸé•‡", desc: "å†°å°æåœ°æ™¯è§‚", full: "ç»ˆå¹´ç§¯é›ªä½†å†…å¿ƒç«çƒ­çš„åŸåŒºã€‚" },
            "çš‡å§‘åŒº": { name: "çƒ­å¸¦é›¨æ—åŒº", desc: "ç¥ç§˜æ¹¿åœ°ç§˜å¢ƒ", full: "æ¤è¢«èŒ‚å¯†çš„å¤©ç„¶æ°§å§ä¸ç§˜å¢ƒã€‚" },
            "é“è¥¿åŒº": { name: "å·¥ä¸šä»“å‚¨åŒº", desc: "ç¡¬æ ¸åŠ›é‡è±¡å¾", full: "åŠ›é‡ä¸æ±—æ°´é“¸å°±çš„é’¢é“ä¸›æ—ã€‚" },
            "æµ‘å—åŒº": { name: "æœªæ¥ä¹‹åŸ", desc: "é«˜æ–°ç§‘æŠ€çª—å£", full: "è§¦æ‰‹å¯åŠçš„æ˜æ—¥ä¸–ç•Œç§‘æŠ€æ„Ÿã€‚" },
            "äºæ´ªåŒº": { name: "åŸé‡éƒŠåŒº", desc: "å®é™è‰åŸé£å…‰", full: "å¹¿é˜”è‰åœºä¸æ‚ é—²çš„ç”°å›­æ—¶å…‰ã€‚" },
            "è‹å®¶å±¯åŒº": { name: "å°é¼ åŸè¾¹å¢ƒ", desc: "å¾®å‹ç²¾è‡´ç¤¾åŒº", full: "å¾®ç¼©æ™¯è§‚é‡Œçš„æè‡´ç¾å‘³å¯†åº¦ã€‚" },
            "æ²ˆåŒ—æ–°åŒº": { name: "å†°å·æ£®æ—", desc: "è‡ªç„¶ç§‘å­¦è¾¹ç•Œ", full: "æ¢ç´¢è‡ªç„¶ä¸ç°ä»£æ–‡æ˜çš„äº¤ç•Œã€‚" }
        };

        const shenyangFoodPool = {
            "å’Œå¹³åŒº": ["å‘³å®¶çƒ¤è‚‰çƒ¤é³—é±¼", "å°å¹¿å››èœä¸€ç»", "ä¸ƒèœé¦†", "æˆ˜è®°é…¸èœç«é”…", "é¹¿é¸£æ˜¥é¥­åº—"],
            "æ²ˆæ²³åŒº": ["åƒé‡Œé©¬çƒ§çƒ¤", "æƒ å¾·åŠè‚˜å­é¥­", "åé¡ºå›­å›å¤´é¦†", "å­æºé¢é¦†", "æ¸å®—å··å­ç«é”…"],
            "å¤§ä¸œåŒº": ["çº¢ä¸¹ä¸¹å¯¿å¸", "å¤§å§ç‚’é¥­", "ä¸‰é¡ºç­‹é¥¼", "ç¬¬ä¸€å®¶é›ªé’§ä¸²åº—", "è€ä¸‰é¸¡æ¶è‚‰ä¸²"],
            "çš‡å§‘åŒº": ["è€å¥‰å¤©ç„¦ç«é¸¡æ¶", "ç«äº‘é¾™çƒ¤è‚‰", "ç™½å±±çƒ§çƒ¤", "é±¼ä¹‹æºæ°´ç…®é±¼", "ç™½é¹¤å¤§å†·é¢"],
            "é“è¥¿åŒº": ["å‡ æ¯›å¤§é…’åº—", "ç¾¤ä¹é¥­åº—", "å…¬å›­è€å­—å·é¢é¦†", "å°ç§‹å‘³è•¾ç‚’é¸¡", "æ˜¥è‰³ç ‚é”…å±…"],
            "æµ‘å—åŒº": ["ç™¾ç¦è€ä¸å¤´", "ç‹å¥‹æ–—é…¸æ±¤ç‰›è‚‰", "èŠé…¥è¾¾ç¤¼", "åˆ˜è®°åŒ å¿ƒå¤§ç›˜é¸¡", "ç‰›YOå¯¿å–œçƒ§"],
            "äºæ´ªåŒº": ["ç±³å¨…æ³°å¼å°å¨", "ç‰›ä¹é“œç«é”…", "è€äº‘é¾™æ³¥ç‚‰çƒ¤è‚‰"],
            "è‹å®¶å±¯åŒº": ["éŸ©éº¦å¤§å†·é¢", "åƒæƒ ç‚¸ä¸²", "èƒ¡è®°éº»è¾£é¦™é”…", "æ–‡è£ä¸²åº—"],
            "æ²ˆåŒ—æ–°åŒº": ["èƒ–ä¸«æ˜¥é¥¼", "é™ˆè®°éš†æ±ŸçŒªè„šé¥­", "å››å·ç‡ƒé¢", "èºä¸‰å²èºè›³ç²‰"]
        };

        const districts = Object.keys(shenyangFoodPool);

        const SafeImage = ({ src, alt, className }) => {
            const [error, setError] = useState(false);
            if (error) {
                return <div className={`${className} img-fallback`}></div>;
            }
            return <img src={src} alt={alt} className={className} onError={() => setError(true)} />;
        };

        const callGemini = async (prompt, systemInstruction = "") => {
            const apiKey = ""; 
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] }
            };

            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (response.ok) {
                        const data = await response.json();
                        return data.candidates?.[0]?.content?.parts?.[0]?.text;
                    }
                } catch (e) {
                    await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
                }
            }
            return "æŠ¥å‘Šï¼é€šè®¯ä¿¡å·è¢«ç¾Šå‰¯å¸‚é•¿æ‹¦æˆªäº†...ä¸è¿‡ç”œç”œåœˆæ˜¯çœŸçš„å¥½åƒï¼ğŸ©";
        };

        function App() {
            const [stage, setStage] = useState('HOME'); 
            const [selectedDistrict, setSelectedDistrict] = useState("");
            const [selectedRest, setSelectedRest] = useState("");
            const [isSpinning, setIsSpinning] = useState(false);
            const [aiReport, setAiReport] = useState("");
            const [isAiLoading, setIsAiLoading] = useState(false);

            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            });

            const startArchive = () => {
                setStage('FLYING');
                setTimeout(() => setStage('PICK_BOX'), 1200);
            };

            const openBox = () => {
                const randomIdx = Math.floor(Math.random() * districts.length);
                setSelectedDistrict(districts[randomIdx]);
                setStage('MISSION_BRIEF');
            };

            const executeSearch = () => {
                setStage('DRAWING');
                setIsSpinning(true);
                setTimeout(() => {
                    const options = shenyangFoodPool[selectedDistrict];
                    const result = options[Math.floor(Math.random() * options.length)];
                    setSelectedRest(result);
                    setIsSpinning(false);
                    setStage('RESULT');
                    fetchAiReport(result);
                }, 4000); 
            };

            const fetchAiReport = async (name) => {
                setIsAiLoading(true);
                const systemPrompt = `ä½ ç°åœ¨æ˜¯ã€Šç–¯ç‹‚åŠ¨ç‰©åŸã€‹çš„è±¹è­¦å®˜ã€‚ä½ è¦å¯¹åœ¨æ²ˆé˜³${selectedDistrict}å‘ç°çš„é¤å…â€œ${name}â€å†™ä¸€ä»½è¶…çº§çƒ­æƒ…çš„ç‚¹è¯„ã€‚å­—æ•°50å­—å†…ï¼Œå¿…é¡»åŒ…å«ç”œç”œåœˆå…ƒç´ ã€‚`;
                const report = await callGemini(`é¤å…ï¼š${name}`, systemPrompt);
                setAiReport(report);
                setIsAiLoading(false);
            };

            return (
                <div className="min-h-screen flex flex-col items-center relative">
                    {/* âœ… æ”¹åŠ¨ 3ï¼šå°† ASSETS å¯¹è±¡ä¸­çš„ background è·¯å¾„é€šè¿‡ React inline style ç»‘å®šåˆ°è¿™ä¸ªèƒŒæ™¯ div ä¸Š */}
                    {/* è¿™æ ·ä»¥åä½ åªéœ€è¦ä¿®æ”¹ä¸Šé¢ ASSETS é‡Œçš„æ–‡ä»¶åï¼ŒèƒŒæ™¯å°±ä¼šè‡ªåŠ¨ç”Ÿæ•ˆ */}
                    <div 
                        className="zootopia-bg"
                        style={{ backgroundImage: `url(${ASSETS.background})` }}
                    ></div>
                    
                    {/* Header */}
                    <div className="z-10 w-full max-w-lg mt-8 px-6 flex flex-col items-center text-center">
                        <div className="bg-yellow-500 p-2 rounded-full border-4 border-white mb-3 shadow-2xl">
                            <i data-lucide="shield-check" className="text-blue-900 w-8 h-8"></i>
                        </div>
                        <h1 className="text-3xl font-black italic tracking-tighter text-white drop-shadow-lg uppercase">ZPD Shenyang Case</h1>
                        <p className="text-yellow-400 font-bold text-[10px] tracking-[0.4em] uppercase mt-1">Special Food Operations</p>
                    </div>

                    <div className="z-10 w-full max-w-4xl mt-6 px-4 pb-10">
                        
                        {/* STAGE: HOME */}
                        {(stage === 'HOME' || stage === 'FLYING') && (
                            <div className="fade-in">
                                <div className="zpd-glass p-5 rounded-[2rem] mb-8 flex items-center gap-5 border-l-8 border-blue-500 shadow-xl">
                                    <SafeImage src={ASSETS.judy} alt="Judy" className="w-20 h-20 rounded-2xl border-2 border-white object-cover shadow-lg" />
                                    <div>
                                        <p className="font-black text-blue-400 text-lg italic uppercase">Officer Judy Hopps:</p>
                                        <p className="text-sm text-white/90 leading-snug">
                                            â€œæ²ˆé˜³åˆ†å±€çš„æƒ…æŠ¥ç½‘å·²ç»é”å®šäº†9ä¸ªå…³é”®åŒºåŸŸã€‚å°¼å…‹å·²ç»å‡†å¤‡å¥½äº†åŠ å¯†å½’æ¡£ç®±ï¼Œå‡†å¤‡å¥½å‡ºå‘äº†å—ï¼Ÿâ€
                                        </p>
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 mb-10 relative">
                                    {districts.map((d, i) => (
                                        <div 
                                            key={d} 
                                            className={`zpd-glass p-5 rounded-[1.5rem] flex flex-col items-start district-card border-white/5 ${stage === 'FLYING' ? 'archive-anim' : ''}`} 
                                            style={{animationDelay: `${i*0.06}s`}}
                                        >
                                            <div className="w-full flex justify-between items-start mb-3">
                                                <div className="p-2 bg-yellow-500/10 rounded-lg">
                                                    <i data-lucide="map-pin" className="text-yellow-500 w-5 h-5"></i>
                                                </div>
                                                <span className="text-[10px] font-bold text-blue-400/60 uppercase tracking-widest italic">Sector-{i+1}</span>
                                            </div>
                                            <h3 className="text-xl font-black text-white italic mb-1 uppercase tracking-tighter">{zootopiaDistricts[d].name}</h3>
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="w-1 h-1 rounded-full bg-blue-500"></div>
                                                <span className="text-[11px] font-bold text-blue-300 uppercase italic tracking-wider">{d}</span>
                                            </div>
                                            <p className="text-[11px] text-white/50 leading-relaxed font-medium">{zootopiaDistricts[d].desc}</p>
                                            <div className="mt-4 pt-3 border-t border-white/5 w-full flex items-center justify-between">
                                                <span className="text-[9px] text-white/30 font-mono tracking-tighter">DATA_ENCRYPTED</span>
                                                <i data-lucide="chevron-right" className="text-white/20 w-3.5 h-3.5"></i>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {stage === 'HOME' && (
                                    <div className="flex justify-center">
                                        <button onClick={startArchive} className="w-full sm:w-2/3 py-6 police-btn rounded-[2rem] text-2xl font-black italic flex items-center justify-center gap-3 text-white">
                                            <i data-lucide="package" className="w-8 h-8"></i> æ¡£æ¡ˆè£…ç®±ï¼Œå‡†å¤‡å‡ºè­¦
                                        </button>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* STAGE: PICK_BOX */}
                        {stage === 'PICK_BOX' && (
                            <div className="text-center fade-in flex flex-col items-center py-8">
                                <div className="zpd-glass p-5 rounded-[2.5rem] mb-12 flex items-center gap-5 border-l-8 border-orange-500 shadow-2xl max-w-md">
                                    <SafeImage src={ASSETS.nick} alt="Nick" className="w-20 h-20 rounded-2xl border-2 border-white object-cover shadow-lg" />
                                    <div className="text-left">
                                        <p className="font-black text-orange-400 text-lg italic uppercase">Officer Nick Wilde:</p>
                                        <p className="text-sm text-white/90 italic">â€œå“¦ï¼Œèåœå¤´ã€‚å¬æˆ‘çš„ï¼Œéšä¾¿é€‰ä¸€ä¸ªï¼Œæ²ˆé˜³çš„å‘³é“ä»ä¸éª—äººã€‚â€</p>
                                    </div>
                                </div>
                                <button onClick={openBox} className="group relative transition-all active:scale-90">
                                    <div className="zpd-glass w-56 h-56 rounded-[4rem] flex items-center justify-center border-4 border-white/20 box-ready hover:border-yellow-400">
                                        <i data-lucide="package" className="text-yellow-500 w-24 h-24 group-hover:rotate-12 transition-transform duration-500"></i>
                                        <div className="absolute -top-4 -right-4 bg-blue-600 w-16 h-16 rounded-full border-4 border-white flex items-center justify-center shadow-2xl text-white">
                                            <i data-lucide="shield-check" className="w-8 h-8"></i>
                                        </div>
                                    </div>
                                    <p className="mt-8 text-sm font-black tracking-[0.6em] text-blue-400 uppercase animate-pulse">ç‚¹å‡»å¼€å¯ç»å¯†æ¡£æ¡ˆ</p>
                                </button>
                            </div>
                        )}

                        {/* STAGE: MISSION_BRIEF */}
                        {stage === 'MISSION_BRIEF' && (
                            <div className="zpd-glass p-8 rounded-[4rem] border-t-[12px] border-yellow-500 fade-in shadow-2xl text-center">
                                <div className="flex justify-center mb-6">
                                    <div className="relative">
                                        <SafeImage src={ASSETS.judy2} alt="judy2" className="w-28 h-28 rounded-3xl border-4 border-yellow-500 object-cover shadow-2xl" />
                                        <div className="absolute -bottom-2 -right-2 bg-blue-600 p-2 rounded-lg border-2 border-white text-white">
                                            <i data-lucide="shield-check" className="w-5 h-5"></i>
                                        </div>
                                    </div>
                                </div>
                                <h2 className="text-4xl font-black text-white italic mb-2 tracking-tighter uppercase">{zootopiaDistricts[selectedDistrict].name}</h2>
                                <div className="inline-block px-4 py-1 bg-white/5 rounded-full mb-6">
                                    <p className="text-blue-300 text-xs font-bold italic">åŸå§‹è¾–åŒºå®šä½ï¼š{selectedDistrict}</p>
                                </div>
                                <p className="text-white/80 text-lg mb-10 px-6 italic leading-relaxed font-medium">â€œ{zootopiaDistricts[selectedDistrict].full}â€</p>
                                <button onClick={executeSearch} className="w-full py-6 police-btn rounded-[2.5rem] text-2xl font-black italic flex items-center justify-center gap-3 text-white">
                                    <i data-lucide="search" className="w-8 h-8"></i> å¼€å§‹æœç´¢çº¿ç´¢
                                </button>
                            </div>
                        )}

                        {/* STAGE: DRAWING */}
                        {stage === 'DRAWING' && (
                            <div className="zpd-glass p-12 rounded-[4rem] flex flex-col items-center justify-center text-center shadow-2xl fade-in">
                                <div className="relative mb-8">
                                    <SafeImage src={ASSETS.flash} alt="Flash" className="w-40 h-40 rounded-full border-4 border-yellow-500 object-cover shadow-2xl" />
                                    <div className="absolute inset-[-10px] rounded-full border-4 border-blue-500 border-t-transparent animate-[spin_3s_linear_infinite]"></div>
                                </div>
                                <p className="text-3xl font-black italic text-white mb-3">é—ª....ç”µ....æ­£....åœ¨....æŸ¥....è¯¢....</p>
                                <p className="text-blue-400 text-xs font-black tracking-[0.4em] slow-motion uppercase">Connecting... to... ZPD... Database...</p>
                            </div>
                        )}

                        {/* STAGE: RESULT */}
                        {stage === 'RESULT' && (
                            <div className="fade-in">
                                <div className="zpd-glass rounded-[4rem] p-10 relative overflow-hidden border-2 border-white/5 shadow-2xl">
                                    <div className="absolute -right-16 -top-16 text-[250px] opacity-[0.03] rotate-12 select-none">ğŸ©</div>
                                    <div className="flex justify-between items-center mb-10">
                                        <div className="flex items-center gap-3">
                                            <div className="w-4 h-4 bg-red-500 rounded-full animate-pulse shadow-[0_0_15px_#ef4444]"></div>
                                            <span className="text-xs font-black text-white/50 tracking-[0.3em] uppercase italic">Investigation Closed</span>
                                        </div>
                                        <div className="bg-yellow-500 text-blue-900 px-4 py-1 rounded-full font-black text-xs italic">ç»å¯†çº§åˆ« A+</div>
                                    </div>
                                    <div className="flex flex-col md:flex-row gap-10 items-center mb-12 text-white">
                                        <div className="relative">
                                            <div className="w-32 h-32 bg-blue-900/40 rounded-[2rem] border-4 border-yellow-500 flex items-center justify-center text-5xl shadow-2xl">ğŸœ</div>
                                            <div className="absolute -bottom-3 -right-3 bg-white rounded-full p-2 text-3xl border-4 border-blue-900 shadow-xl">ğŸ¾</div>
                                        </div>
                                        <div className="flex-1 text-center md:text-left">
                                            <div className="text-blue-400 text-xs font-black italic mb-2 uppercase tracking-widest">{selectedDistrict} æƒ…æŠ¥ç«™</div>
                                            <h2 className="text-4xl md:text-5xl font-black italic leading-none mb-4">{selectedRest}</h2>
                                            <div className="flex items-center justify-center md:justify-start gap-1">
                                                {[...Array(5)].map((_, i) => <i key={i} data-lucide="star" className="fill-yellow-500 text-yellow-500 w-4 h-4"></i>)}
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-white/5 border border-white/10 rounded-[2.5rem] p-8 mb-10 shadow-inner">
                                        <div className="flex items-center gap-3 mb-4">
                                            <span className="text-4xl">ğŸ†</span>
                                            <span className="font-black text-yellow-500 text-xs italic tracking-[0.2em] uppercase">Clawhauser's Note (AI)</span>
                                        </div>
                                        {isAiLoading ? (
                                            <div className="flex items-center gap-3 text-white/30 py-6 italic text-lg"><i data-lucide="loader-2" className="animate-spin w-6 h-6"></i><span>æ¯”å¯¹è¯æ®åº“...</span></div>
                                        ) : (
                                            <p className="text-white text-xl font-medium italic leading-relaxed">â€œ{aiReport}â€</p>
                                        )}
                                    </div>
                                    <div className="flex flex-col sm:flex-row gap-5 text-white">
                                        <button className="flex-1 py-5 police-btn rounded-[1.8rem] text-xl font-black italic flex items-center justify-center gap-3">
                                            <i data-lucide="navigation" className="w-6 h-6"></i> ç«‹å³å¯¼èˆª
                                        </button>
                                        <button onClick={executeSearch} className="flex-1 py-5 bg-white/5 hover:bg-white/10 rounded-[1.8rem] text-xl font-black italic border border-white/10 transition-all flex items-center justify-center gap-3">
                                            <i data-lucide="sparkles" className="text-yellow-500 w-6 h-6"></i> ç”³è¯·æ–°çº¿ç´¢
                                        </button>
                                    </div>
                                </div>
                                <button onClick={() => setStage('HOME')} className="w-full mt-10 py-5 text-white/30 font-black flex items-center justify-center gap-3 text-xs tracking-[0.8em] uppercase hover:text-white hover:tracking-[1em] transition-all duration-500">
                                    <i data-lucide="rotate-ccw" className="w-4 h-4"></i> è¿”å›æŒ‡æŒ¥éƒ¨
                                </button>
                            </div>
                        )}
                    </div>

                    <div className="fixed bottom-0 left-0 w-full p-6 pointer-events-none z-0 opacity-10 flex justify-between items-end overflow-hidden">
                        <p className="text-[120px] font-black italic text-white/5 select-none tracking-tighter leading-none">ZPD</p>
                        <p className="text-[60px] font-black italic text-white/5 select-none tracking-tighter leading-none">SY-DIVISION</p>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>